<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Iniciar sesión</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root {
      --radius: 16px; --pad-lg: 28px;
      --border: color-mix(in srgb, CanvasText 18%, transparent);
      --subtle: color-mix(in srgb, CanvasText 60%, transparent);
      --accent: #6366f1; --ok: #10b981; --warn: #ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100dvh; display: grid; place-items: center;
      font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans";
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(99,102,241,.10), transparent 60%),
        radial-gradient(900px 500px at 110% 10%, rgba(16,185,129,.10), transparent 60%),
        radial-gradient(900px 600px at 50% 120%, rgba(59,130,246,.10), transparent 60%),
        canvas;
    }
    main.card {
      width: min(420px, 92vw);
      background: color-mix(in srgb, Canvas 96%, black 0%);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: var(--pad-lg);
      box-shadow: var(--shadow);
      backdrop-filter: saturate(120%) blur(6px);
    }
    h1 { margin: 0 0 6px; font-size: 1.55rem; }
    .sub { margin: 0 0 18px; color: var(--subtle); font-size: .95rem; }
    label { display: block; font-weight: 600; margin: 14px 0 8px; }
    .field {
      display: flex; align-items: center; padding: 0 12px;
      border: 1px solid var(--border); border-radius: 12px; background: color-mix(in srgb, Canvas 98%, black 0%);
      transition: border-color .18s ease, box-shadow .18s ease, background .18s ease;
    }
    input[type="text"], input[type="password"] {
      width: 100%; height: 46px; border: 0; outline: 0; background: transparent; font-size: 1rem; color: inherit;
    }
    .btn {
      width: 100%; margin-top: 18px; height: 48px; border: 0; border-radius: 12px; cursor: pointer;
      background: linear-gradient(90deg, var(--accent), #3b82f6); color: white; font-weight: 700; letter-spacing: .3px;
      transition: filter .18s ease, transform .18s ease;
    }
    .btn:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .msg {
      margin-top: 16px;
      font-weight: 600;
      text-align: center;
    }
    .msg.error { color: var(--warn); }
    .msg.success { color: var(--ok); }
  </style>
</head>
<body>
  <main class="card">
    <h1>Bienvenido</h1>
    <p class="sub">Inicia sesión con tu usuario y contraseña.</p>

    <form id="loginForm">
      <label for="usuario">Usuario</label>
      <div class="field">
        <input id="usuario" name="usuario" type="text" placeholder="Tu usuario" required />
      </div>

      <label for="password">Contraseña</label>
      <div class="field">
        <input id="password" name="password" type="password" placeholder="••••••••" required />
      </div>

      <button class="btn" type="submit">Entrar</button>
      <p id="mensaje" class="msg"></p>
    </form>
  </main>

  <script>
    const form = document.getElementById('loginForm');
    const mensaje = document.getElementById('mensaje');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const Usuario = document.getElementById('usuario').value.trim();
      const Password = document.getElementById('password').value.trim();

      mensaje.textContent = 'Procesando...';
      mensaje.className = 'msg';

      try {
        const res = await fetch('/api/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ Usuario, Password })
        });

        const data = await res.json();

        if (res.ok && data.success) {
          mensaje.textContent = 'LogIn exitoso';
          mensaje.className = 'msg success';
          // Redirigir si quieres:
           window.location.href = '/interfazDentro.html';
        } else {
          mensaje.textContent = `${data.error || 'Credenciales incorrectas'}`;
          mensaje.className = 'msg error';
        }
      } catch (err) {
        console.error(err);
        mensaje.textContent = 'Error de conexión con el servidor';
        mensaje.className = 'msg error';
      }
    });
  </script>
</body>
</html>

